# =============================================================================
# PRODUCCIÓN - Microservicio Users
# =============================================================================
# Este archivo contiene configuraciones para entorno de producción.
# NO COMMITEAR este archivo a Git (.gitignore ya lo excluye)
# =============================================================================
# IMPORTANTE:
# - Cambiar TODAS las contraseñas
# - Usar Azure Key Vault para secretos JWT
# - Configurar dominios específicos en AllowedHosts
# =============================================================================

# --- ENTORNO ---
ASPNETCORE_ENVIRONMENT=Production

# --- URLS DEL API ---
ASPNETCORE_URLS=http://+:8081

# --- BASE DE DATOS MYSQL (PRODUCCIÓN) ---
DB_NAME=usersdb_prod
DB_USER=msuser_prod
DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_PRODUCTION
DB_ROOT_PASSWORD=CHANGE_THIS_ROOT_PASSWORD_PRODUCTION
DB_PORT=3306

# --- PUERTO DEL API ---
API_HOST_PORT=8081

# --- JWT CONFIGURATION (PRODUCTION) ---
# CRÍTICO: NO exponer SecretKey aquí
# Usar Azure Key Vault, AWS Secrets Manager, o Kubernetes Secrets
# La SecretKey debe ser la MISMA que en el Gateway

# JWT Issuer (dominio real de producción)
JwtSettings__Issuer=https://accessibility.company.com

# JWT Audience (dominio de la aplicación)
JwtSettings__Audience=https://app.yourcompany.com

# Token expiration
JwtSettings__ExpiryHours=24

# --- AUTENTICACIÓN ---
Auth__SessionTokenMinutes=1440

# --- HEALTH CHECKS ---
HealthChecks__EnableDetailedErrors=false
HealthChecks__MemoryThresholdMB=1024

# --- MÉTRICAS ---
Metrics__Enabled=true
Metrics__EnableHttpMetrics=true

# --- LOGGING (MENOS VERBOSE EN PRODUCCIÓN) ---
Logging__LogLevel__Default=Warning
Logging__LogLevel__Microsoft.AspNetCore=Error
Logging__LogLevel__Microsoft.Extensions.Diagnostics.HealthChecks=Warning

# --- HOSTS PERMITIDOS ---
# Especificar dominios permitidos (separados por coma)
AllowedHosts=api.yourcompany.com,app.yourcompany.com

# --- MYSQL OPCIONALES ---
MYSQL_CHARSET=utf8mb4
MYSQL_COLLATION=utf8mb4_unicode_ci
ENABLE_SSL=true
CONNECTION_TIMEOUT=30
COMMAND_TIMEOUT=300

# =============================================================================
# CHECKLIST DE PRODUCCIÓN
# =============================================================================
# [ ] Cambiar DB_PASSWORD a contraseña fuerte (mínimo 32 caracteres)
# [ ] Cambiar DB_ROOT_PASSWORD a contraseña fuerte
# [ ] Configurar JwtSettings__SecretKey en Azure Key Vault
# [ ] Actualizar JwtSettings__Issuer con dominio real
# [ ] Actualizar JwtSettings__Audience con dominio real
# [ ] Configurar AllowedHosts con dominios específicos
# [ ] Sincronizar JWT config con Gateway (.\.\Validate-JwtConfig.ps1)
# [ ] Habilitar SSL/TLS en MySQL
# [ ] Configurar respaldos automáticos de base de datos
# [ ] Implementar monitoreo y alertas
# [ ] Configurar rotación de contraseñas
# =============================================================================